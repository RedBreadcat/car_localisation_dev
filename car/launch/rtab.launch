<launch>


    <!-- Corresponding config files -->
    <arg name="cfg"                     default="" /> <!-- To change RTAB-Map's parameters, set the path of config file (*.ini) generated by the standalone app -->
    <arg name="gui_cfg"                 default="~/.ros/rtabmap_gui.ini" />
    <arg name="rviz_cfg"                default="$(find rtabmap_ros)/launch/config/rgbd.rviz" />
    
    <arg name="frame_id"                default="camera_link"/>     <!-- Fixed frame id, you may set "base_link" or "base_footprint" if they are published -->
    <arg name="odom_frame_id"           default=""/>                <!-- If set, TF is used to get odometry instead of the topic -->
    <arg name="map_frame_id"            default="map"/>
    <arg name="ground_truth_frame_id"   default=""/>     <!-- e.g., "world" -->
    <arg name="ground_truth_base_frame_id" default=""/>  <!-- e.g., "tracker", a fake frame matching the frame "frame_id" (but on different TF tree) -->
    <arg name="namespace"               default="rtabmap"/>
    <arg name="database_path"           default="~/.ros/rtabmap.db"/>
    <arg name="queue_size"              default="10"/>
    <arg name="wait_for_transform"      default="0.2"/>
    <arg name="vo_frame_id"              default="odom"/>
    <arg name="approx_sync"             default="false"/>         <!-- if timestamps of the input topics are not synchronized -->
    <arg name="odom_guess_frame_id"        default=""/>
    <arg name="odom_guess_min_translation" default="0"/>
    <arg name="odom_guess_min_rotation"    default="0"/>  


    <!-- Stereo Odometry -->
    <node pkg="rtabmap_ros" type="stereo_odometry" name="stereo_odometry" output="screen" >
        <remap from="left/image_rect"        to="/zed/left/image_rect_color"/>
        <remap from="right/image_rect"       to="/zed/right/image_rect_color"/>
        <remap from="left/camera_info"       to="/zed/left/camera_info"/>
        <remap from="right/camera_info"      to="/zed/right/camera_info"/>
        <!--<remap from="rgbd_image"             to="$(arg rgbd_topic)"/>
        <remap from="odom"                   to="$(arg odom_topic)"/>-->
    
        <param name="frame_id"                    type="string" value="$(arg frame_id)"/>
        <param name="odom_frame_id"               type="string" value="$(arg vo_frame_id)"/>
        <param name="ground_truth_frame_id"       type="string" value="$(arg ground_truth_frame_id)"/>
        <param name="ground_truth_base_frame_id"  type="string" value="$(arg ground_truth_base_frame_id)"/>
        <param name="wait_for_transform_duration" type="double" value="$(arg wait_for_transform)"/>
        <param name="approx_sync"                 type="bool"   value="$(arg approx_sync)"/>
        <param name="config_path"                 type="string" value="$(arg cfg)"/>
        <param name="queue_size"                  type="int"    value="$(arg queue_size)"/>
        <param name="subscribe_rgbd"              type="bool"   value="false"/>
        <param name="guess_frame_id"              type="string" value="$(arg odom_guess_frame_id)"/>
        <param name="guess_min_translation"       type="double" value="$(arg odom_guess_min_translation)"/>
        <param name="guess_min_rotation"          type="double" value="$(arg odom_guess_min_rotation)"/>
    </node>


</launch>